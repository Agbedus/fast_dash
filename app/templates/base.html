<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Fast Dash{% endblock %}</title>
    
    <!-- CSS Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <!-- Alpine.js for reactive components -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <style>
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --surface-glass: rgba(30, 41, 59, 0.4);
            --surface-elevated: rgba(30, 41, 59, 0.6);
            --accent-blue: #3b82f6;
            --accent-dark: #1e40af;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border-subtle: rgba(148, 163, 184, 0.06);
            --border-normal: rgba(148, 163, 184, 0.1);
        }

        body { 
            font-family: 'Outfit', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: var(--text-primary);
        }
        
        .glass {
            background: var(--surface-glass);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--border-subtle);
        }

        .glass-elevated {
            background: var(--surface-elevated);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border-normal);
        }
        
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(148, 163, 184, 0.2);
            border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(148, 163, 184, 0.3);
        }
        
        /* Loading Spinner Animation */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .spinner {
            animation: spin 1s linear infinite;
        }
        
        /* Button Loading State */
        .btn-loading {
            position: relative;
            pointer-events: none;
            opacity: 0.7;
        }
        .btn-loading .btn-text {
            opacity: 0;
        }
        .btn-loading .spinner-wrapper {
            display: flex !important;
        }

        /* Micro-interactions */
        .interactive-card {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .interactive-card:hover {
            transform: translateY(-2px);
            background: rgba(59, 130, 246, 0.03);
        }

        .interactive-item {
            transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .interactive-item:hover {
            background: rgba(59, 130, 246, 0.05);
            transform: translateX(2px);
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: rgba(59, 130, 246, 0.4);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        button:active {
            transform: scale(0.98);
        }

        /* Seamless UI */
        .seamless {
            border: none;
            background: rgba(30, 41, 59, 0.3);
        }
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen selection:bg-blue-500/20 selection:text-blue-100">
    <!-- Navbar -->
    <nav class="fixed top-0 left-0 right-0 z-50 glass-elevated">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-14">
                <div class="flex items-center gap-6">
                    <a href="/" class="flex items-center gap-2 group">
                        <div class="w-8 h-8 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center border border-blue-500/20 group-hover:scale-105 transition-transform">
                            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                        </div>
                        <span class="font-bold text-lg tracking-tight">Fast<span class="text-blue-400">Dash</span></span>
                    </a>
                    
                    <div class="hidden md:flex items-center gap-4">
                        <a href="/" class="text-sm font-medium text-slate-400 hover:text-blue-400 transition-colors px-2">Home</a>
                        <a href="/database" class="text-sm font-medium text-slate-400 hover:text-blue-400 transition-colors px-2">Database</a>
                        <a href="/create-user" class="text-sm font-medium text-slate-400 hover:text-blue-400 transition-colors px-2">Create User</a>
                    </div>
                </div>

                <div class="flex items-center gap-3">
                    <div class="hidden md:flex items-center gap-2 px-2.5 py-1 bg-emerald-500/10 border border-emerald-500/20 rounded-md">
                        <div class="w-1.5 h-1.5 bg-emerald-400 rounded-full animate-pulse"></div>
                        <span class="text-[10px] font-semibold text-emerald-400 uppercase tracking-wider">Live</span>
                    </div>
                    <a href="/api/v1/auth/logout" class="flex items-center gap-1.5 px-3 py-1.5 bg-slate-800/50 border border-slate-700 rounded-lg text-sm font-medium text-slate-300 hover:bg-red-500/10 hover:border-red-500/30 hover:text-red-400 transition-all">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                        </svg>
                        Logout
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Global Sidebar -->
    {% if request.url.path not in ['/login', '/register'] %}
        {% include "_sidebar.html" %}
    {% endif %}

    <!-- Main Content -->
    <main class="pt-14 {% if request.url.path not in ['/login', '/register'] %}pl-64{% endif %}">
        {% block content %}{% endblock %}
    </main>

    <!-- Global Loading Utilities -->
    <script>
        // Global function to toggle button loading state
        function setButtonLoading(button, isLoading) {
            if (isLoading) {
                button.classList.add('btn-loading');
                button.disabled = true;
            } else {
                button.classList.remove('btn-loading');
                button.disabled = false;
            }
        }

        // Create spinner SVG element
        function createSpinner(size = 'w-5 h-5') {
            const spinner = document.createElement('div');
            spinner.className = `spinner-wrapper absolute inset-0 hidden items-center justify-center`;
            spinner.innerHTML = `
                <svg class="${size} spinner text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
            `;
            return spinner;
        }

        // Initialize all submit buttons with loading capability
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('button[type="submit"]').forEach(btn => {
                if (!btn.querySelector('.spinner-wrapper')) {
                    btn.style.position = 'relative';
                    const textSpan = document.createElement('span');
                    textSpan.className = 'btn-text';
                    textSpan.innerHTML = btn.innerHTML;
                    btn.innerHTML = '';
                    btn.appendChild(textSpan);
                    btn.appendChild(createSpinner());
                }
            });
        });
    </script>

    {% block extra_js %}{% endblock %}
</body>
</html>
